---
title: 分布式事务：基于可靠消息服务
date: 2018-12-04 22:30:08
type: "tags"
tags: [分布式事务，mq]
---

> 微服务倡导将复杂的单体应用拆分为若干个功能简单、松耦合的服务，而于此同时就会引入多个服务之间的分布式事务的问题。

<!--more-->

众所周知，数据库能实现本地事务，也就是说在同一个数据库中，可以保证事务的原子性，就是全部成功或者失败，上篇文章也写过简单的[多数据源事务的解决方案](https://7le.top/2018/07/28/springcloud%EF%BC%9A%E5%AE%9E%E7%8E%B0%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E4%BA%8B%E5%8A%A1/#more)（类似3PC）

但现在的系统往往采用微服务架构，业务系统拥有独立的数据库，因此就出现了跨多个数据库的事务需求，这种事务即为“分布式事务”。

针对这样的问题一般常用的实现方案有：

* 2PC/3PC （两阶段提交协议/三阶段提交协议）
* TCC
* 基于可靠消息服务的分布式事务

### 基于可靠消息服务的分布式事务

基于这个方案，实现了一个基于rabbitmq的分布式事务组件，[shine-mq](https://github.com/7le/shine-mq)

一开始本来是想用来封装mq的操作方便使用，后续迭代增加了分布式事务的功能。

待更新

---
[Github](https://github.com/7le) 不要吝啬你的star ^.^
[更多精彩 戳我](https://7le.top)
